<!--#set var="title" value="OptimizedHTML 5" -->
<!--#include virtual="./parts/header.html" -->
<div class="page page__bg">
  <!--#include virtual="./parts/head.html" -->

  <div class="main-page__wrapper">

    <div class="calendar">
      <div class="calendar__header">
        <a href="" class="calendar__nav calendar__nav--prev">
          <img src="./images/dist/chevron.svg" alt="">
        </a>
        <div class="calendar__title">
          <span class="calendar__month">Ноябрь</span>
        </div>
        <a href="" class="calendar__nav calendar__nav--next">
          <img src="./images/dist/chevron.svg" alt="">
        </a>
      </div>

      <div class="calendar__weekdays">
        <div>Пн</div>
        <div>Вт</div>
        <div>Ср</div>
        <div>Чт</div>
        <div>Пт</div>
        <div>Сб</div>
        <div>Вс</div>
      </div>

      <div class="calendar__grid">
        <button class="calendar__day calendar__day--empty"></button>
        <button class="calendar__day calendar__day--empty"></button>

        <a href="" class="calendar__day">1</a>
        <a href="" class="calendar__day calendar__day--today">2</a>
        <a href="" class="calendar__day calendar__day--green-bg">3</a>
        <a href="" class="calendar__day calendar__day--green">4</a>
        <a href="" class="calendar__day">5</a>
        <a href="" class="calendar__day">6</a>
        <a href="" class="calendar__day">7</a>
        <a href="" class="calendar__day calendar__day--red-bg">8</a>
        <a href="" class="calendar__day calendar__day--red">9</a>
        <a href="" class="calendar__day">10</a>
        <a href="" class="calendar__day">11</a>
        <a href="" class="calendar__day">12</a>
        <a href="" class="calendar__day">13</a>
        <a href="" class="calendar__day">14</a>
        <a href="" class="calendar__day">15</a>
        <a href="" class="calendar__day">16</a>
        <a href="" class="calendar__day">17</a>
        <a href="" class="calendar__day">18</a>
        <a href="" class="calendar__day">19</a>
        <a href="" class="calendar__day">20</a>
        <a href="" class="calendar__day">21</a>
        <a href="" class="calendar__day">22</a>
        <a href="" class="calendar__day">23</a>
        <a href="" class="calendar__day">24</a>
        <a href="" class="calendar__day">25</a>
        <a href="" class="calendar__day">26</a>
        <a href="" class="calendar__day">27</a>
        <a href="" class="calendar__day">28</a>
        <a href="" class="calendar__day">29</a>
        <a href="" class="calendar__day">30</a>
      </div>
    </div>
  </div>

  <div class="calendar__btn-container">
    <a href="" class="calendar__button">Выбрать 15-26 июня</a>
  </div>


  <!--#include virtual="./parts/nav.html" -->
</div>

<!--#include virtual="./parts/footer.html" -->
<script>
  const calendar = document.querySelector('.calendar');
  const monthTitleEl = calendar.querySelector('.calendar__month');
  const gridEl = calendar.querySelector('.calendar__grid');
  const prevBtn = calendar.querySelector('.calendar__nav--prev');
  const nextBtn = calendar.querySelector('.calendar__nav--next');

  const specialDays = {
    '2025-12-03': 'green-bg',
    '2025-12-04': 'green',
    '2025-12-08': 'red-bg',
    '2025-12-09': 'red',
    '2025-12-10': 'today',
  };

  const monthNames = [
    'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',
    'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'
  ];

  const today = new Date();

  let current = new Date();
  current.setDate(1);

  function renderCalendar() {
    const year = current.getFullYear();
    const month = current.getMonth();

    monthTitleEl.textContent = `${monthNames[month]} ${year}`;
    gridEl.innerHTML = '';

    const firstDay = new Date(year, month, 1);
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const daysInPrevMonth = new Date(year, month, 0).getDate();

    let startWeekday = firstDay.getDay();
    startWeekday = (startWeekday + 6) % 7;

    const totalCells = 42;

    for (let i = 0; i < totalCells; i++) {
      const cell = document.createElement('button');
      cell.type = 'button';
      cell.className = 'calendar__day';

      const cellDay = i - startWeekday + 1;

      let dateObj;
      let inCurrent = true;

      if (cellDay <= 0) {
        dateObj = new Date(year, month - 1, daysInPrevMonth + cellDay);
        inCurrent = false;
      } else if (cellDay > daysInMonth) {
        dateObj = new Date(year, month + 1, cellDay - daysInMonth);
        inCurrent = false;
      } else {
        dateObj = new Date(year, month, cellDay);
      }

      const d = dateObj.getDate();
      const m = dateObj.getMonth() + 1;
      const y = dateObj.getFullYear();

      cell.textContent = d;

      const key = `${y}-${String(m).padStart(2, '0')}-${String(d).padStart(2, '0')}`;

      if (specialDays[key]) {
        cell.classList.add(`calendar__day--${specialDays[key]}`);
      }

      if (!inCurrent) {
        cell.classList.add('calendar__day--adjacent');
      }

      if (dateObj.toDateString() === today.toDateString()) {
        cell.classList.add('calendar__day--today');
      }

      gridEl.appendChild(cell);
    }
  }

  prevBtn.addEventListener('click', (e) => {
    e.preventDefault();
    current.setMonth(current.getMonth() - 1);
    renderCalendar();
  });

  nextBtn.addEventListener('click', (e) => {
    e.preventDefault();
    current.setMonth(current.getMonth() + 1);
    renderCalendar();
  });

  renderCalendar();
</script>